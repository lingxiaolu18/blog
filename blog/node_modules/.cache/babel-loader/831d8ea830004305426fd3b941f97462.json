{"ast":null,"code":"var _jsxFileName = \"/Users/sf/code_base/React-blog/blog/src/App.jsx\";\nimport React, { useState, useEffect, useReducer } from 'react';\nimport logo from \"./logo.svg\";\nimport './App.css';\nimport * as services from './services';\nimport LoginPane from './LoginPane';\nimport Posts from './Posts';\nconst initialState = {\n  isLoggedIn: false,\n  userName: '',\n  error: ''\n};\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case 'LOGIN_SUCCESS':\n      return { ...state,\n        isLoggedIn: true,\n        userName: action.payload.data\n      };\n\n    case 'LOGIN_FAILED':\n      return { ...state,\n        isLoggedIn: false,\n        userName: '',\n        error: action.payload.message\n      };\n\n    default:\n      return state;\n  }\n};\n\nfunction App() {\n  const [isLoading, setIsLoading] = useState(false);\n  const [state, dispatch] = useReducer(reducer, initialState);\n  const [posts, setPosts] = useState({});\n\n  const callSignUpService = (username, password) => {\n    services.fetchLogIn(username, password).then(response => {\n      dispatch({\n        type: 'LOGIN_SUCCESS'\n      });\n    }).catch(e => {});\n  };\n\n  const fetchAllPosts = () => {\n    services.fetchAllUserPosts().then(response => {\n      console.log(response.data);\n      setPosts(response.data);\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  useEffect(() => {\n    setIsLoading(true);\n    services.fetchLoginStatus().then(response => {\n      console.log(\"You are logged in!\");\n      dispatch({\n        type: 'LOGIN_SUCCESS',\n        payload: response\n      });\n      setIsLoading(false);\n    }).catch(err => {\n      console.log(err.message); //\"invalid session\"\n\n      dispatch({\n        type: 'LOGIN_FAILED',\n        payload: err\n      });\n      setIsLoading(false);\n    });\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 5\n    }\n  }, isLoading ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Background\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"header\", {\n    className: \"App-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: logo,\n    className: \"App-logo\",\n    alt: \"logo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 9\n    }\n  }))) : '', /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Posts, {\n    postsToDisplay: posts,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }\n  })));\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/sf/code_base/React-blog/blog/src/App.jsx"],"names":["React","useState","useEffect","useReducer","services","LoginPane","Posts","initialState","isLoggedIn","userName","error","reducer","state","action","type","payload","data","message","App","isLoading","setIsLoading","dispatch","posts","setPosts","callSignUpService","username","password","fetchLogIn","then","response","catch","e","fetchAllPosts","fetchAllUserPosts","console","log","err","fetchLoginStatus","logo"],"mappings":"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","sourcesContent":["import React, {useState, useEffect, useReducer} from 'react';\nimport logo from './logo.svg';\nimport './App.css';\nimport * as services from './services';\nimport LoginPane from './LoginPane';\nimport Posts from './Posts';\n\n\n\nconst initialState = {\n  isLoggedIn: false,\n  userName: '',\n  error: '',\n};\n\nconst reducer = (state, action) => {\n  switch(action.type){\n    case 'LOGIN_SUCCESS':\n      return {...state, isLoggedIn: true, userName: action.payload.data};\n    case 'LOGIN_FAILED':\n      return {...state, isLoggedIn: false, userName: '', error: action.payload.message};\n    default:\n      return state;\n  }\n}\n\n\nfunction App() {\n  const [isLoading, setIsLoading] = useState(false);\n  const [state, dispatch] = useReducer(reducer, initialState);\n  const [posts, setPosts] = useState({});\n\n  const callSignUpService = (username, password) => {\n  services.fetchLogIn(username, password)\n  .then((response) => {\n    dispatch({type: 'LOGIN_SUCCESS'},)\n  })\n  .catch((e) => {\n\n  })\n}\n\nconst fetchAllPosts = () => {\n  services.fetchAllUserPosts()\n  .then(response => {\n    console.log(response.data);\n    setPosts(response.data);\n  })\n  .catch(err => {\n    console.log(err);\n  });\n};\n\n  useEffect(() => {\n    setIsLoading(true);\n    services.fetchLoginStatus()\n    .then((response) => {\n      console.log(\"You are logged in!\");\n      dispatch({type: 'LOGIN_SUCCESS', payload: response})\n      setIsLoading(false);\n    })\n    .catch((err) => {\n      console.log(err.message); //\"invalid session\"\n      dispatch({type: 'LOGIN_FAILED', payload: err});\n      setIsLoading(false);\n    });\n  }, []);\n\n  return (\n    <div className=\"App\">\n    {isLoading? \n    <div className = \"Background\">\n      <header className=\"App-header\">\n        <img src={logo} className=\"App-logo\" alt=\"logo\" />\n      </header>\n    </div> : ''}\n    \n    <div className = \"Content\">\n      {/* {state.isLoggedIn? '' : <LoginPane/>} */}\n      {/* {state.error? state.error : ''} */}\n      <Posts postsToDisplay = {posts}/>\n    </div>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}